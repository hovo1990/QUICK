= how to build


[source, bash]
----
docker buildx build -t quick .


docker run -it --gpus all quick /bin/bash


rm -rf src_build/
# this fixes the bug of not finding basis, just launch in the debug terminal
export QUICK_BASIS=$(pwd)/install/basis
mkdir src_build

cd src_build


#-- for full debug set optimization to -O0
# -- TODO for full debug mode, so the compiler does not omit intermediate results
#-- This did not fix the problem
cmake .. -DCOMPILER=GNU -DCMAKE_INSTALL_PREFIX=$(pwd)/../install -DCUDA=TRUE -DMPI=TRUE -DCMAKE_BUILD_TYPE=Debug -DCMAKE_CXX_FLAGS="-O0" -DCMAKE_Fortran_FLAGS="-O0 -fno-automatic -fbacktrace -fcheck=all" --graphviz=quick.dot

#-- Test 2 still optimized out
cmake .. -DCOMPILER=GNU -DCMAKE_INSTALL_PREFIX=$(pwd)/../install -DCUDA=TRUE -DMPI=TRUE -DCMAKE_BUILD_TYPE=Debug -DCMAKE_CXX_FLAGS="-O0" -DCMAKE_Fortran_FLAGS="-O0" --graphviz=quick.dot


#-- Test 3 look for CMake-Options.md seems working
cmake .. -DCOMPILER=GNU -DCMAKE_INSTALL_PREFIX=$(pwd)/../install -DCUDA=TRUE -DMPI=TRUE -DCMAKE_BUILD_TYPE=Debug -DCMAKE_CXX_FLAGS="-O0" -DCMAKE_Fortran_FLAGS="-O0" -DCMAKE_C_FLAGS="-O0" -DQUICK_DEBUG=TRUE -DOPTIMIZE=FALSE --graphviz=quick.dot



# -- * working The usual stuff
cmake .. -DCOMPILER=GNU -DCMAKE_INSTALL_PREFIX=$(pwd)/../install -DCUDA=TRUE -DMPI=TRUE -DCMAKE_BUILD_TYPE=Debug -DCMAKE_CXX_FLAGS="-O0" -DCMAKE_Fortran_FLAGS="-O0 --graphviz=quick.dot

make -j16 install VERBOSE=1 


make -j16 install


#-- Enter running vs code container

docker exec -it <mycontainer> bash

----

= Cmake debugger in vs code

[source, bash]
----
to debug cmake look at cmake.configureArgs in .vscode/settings.json
----



= Reproducible environment

https://stackoverflow.com/questions/72129213/using-gpu-in-vs-code-container


[source,bash]
----
gfortran -g test.f90
----

= Problems with QCSchema and QCElemental

If QCSchema is still alive, I'd suggest it should borrow what we did for Avogadro Chemical JSON
https://github.com/MolSSI/QCSchema/issues/86


There is also chemical json format
https://github.com/OpenChemistry/chemicaljson

https://github.com/MolSSI/QCSchema/issues/68

https://github.com/MolSSI/QCElemental

https://github.com/MolSSI/QCElemental/pull/287